[{"_path":"/plugins/connect.p0f","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"connect.p0f - TCP Fingerprinting plugin for Haraka","description":"Haraka connect.p0f plugin - TCP Fingerprinting","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"connectp0f-plugin"},"children":[{"type":"text","value":"connect.p0f plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use TCP fingerprint info (remote computer OS, network distance, etc) to\nimplement more sophisticated anti-spam policies."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin inserts a "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"p0f"}]},{"type":"text","value":" connection note with information deduced\nfrom the TCP fingerprint. The note typically includes at least the link,\ndetail, distance, uptime, genre. Here's an example:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"genre    => FreeBSD\ndetail   => 8.x (1)\nuptime   => 1390\nlink     => ethernet/modem\ndistance => 17"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Which was parsed from this p0f fingerprint:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"24.18.227.2:39435 - FreeBSD 8.x (1) (up: 1390 hrs)\n-> 208.75.177.101:25 (distance 17, link: ethernet/modem)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The following additional values may also be available in\nthe "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"p0f"}]},{"type":"text","value":" connection note:"}]},{"type":"element","tag":"code","props":{"code":"magic, status, first_seen, last_seen, total_conn, uptime_min, up_mod_days, last_nat, last_chg, distance, bad_sw, os_match_q, os_name, os_flavor, http_name, http_flavor, link_type, and language.\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"magic, status, first_seen, last_seen, total_conn, uptime_min, up_mod_days, last_nat, last_chg, distance, bad_sw, os_match_q, os_name, os_flavor, http_name, http_flavor, link_type, and language.\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"start p0f"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a startup script for p0f that creates a communication socket when your\nserver starts up."}]},{"type":"element","tag":"code","props":{"code":"/usr/local/bin/p0f -u smtpd -d -s /tmp/.p0f_socket 'dst port 25 or dst port 587'\nchown smtpd /tmp/.p0f_socket\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/usr/local/bin/p0f -u smtpd -d -s /tmp/.p0f_socket 'dst port 25 or dst port 587'\nchown smtpd /tmp/.p0f_socket\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"2. configure p0f plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"add an entry to config/plugins to enable p0f:"}]},{"type":"element","tag":"code","props":{"code":"connect.p0f\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"connect.p0f\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"3. review settings in config/connect.p0f.ini"}]},{"type":"element","tag":"h2","props":{"id":"startup"},"children":[{"type":"text","value":"Startup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the contrib/ubuntu-upstart directory is a config file (p0f.conf) for Ubuntu."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the contrib/bsd-rc.d directory is a startup file for FreeBSD."}]}]},"navigation":{"title":"connect.p0f"},"_type":"markdown","_id":"content:8.plugins:connect.p0f.md","_source":"content","_file":"8.plugins/connect.p0f.md","_extension":"md"},{"_path":"/plugins/daemonize","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"daemonize - Daemonize plugin for Haraka","description":"Haraka daemonize plugin - Daemonize","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"daemonize-plugin"},"children":[{"type":"text","value":"daemonize plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"IMPORTANT NOTE: This plugin should not be used any more and it will\nthrow an error and prevent Haraka from starting."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDaemonization is now built into Haraka.  If the 'daemon' module is\ninstalled you simply set daemonize=true in config/smtp.ini now."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use this plugin you have to install the 'daemon' module by running\n'npm install daemon' in your Haraka configuration directory."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf daemon is not found then the plugin will log a notice and Haraka will\ncontinue running in the foreground."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin should be listed at the top of your config/plugins file so that\nHaraka goes into the background before any other plugins are run."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin looks for daemonize.ini in your configuration directory and the\nfollowing options can be set:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"log_file  (default: /var/log/haraka.log)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The file that STDOUT should be redirected to.  It is recommended that\nyou use this plugin with the log.syslog plugin instead."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pid_file  (default: /var/run/haraka.pid)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"File where the master process PID should be written to.  If this file\ncannot be locked then start-up will fail."}]}]},{"type":"element","tag":"h2","props":{"id":"init-script"},"children":[{"type":"text","value":"Init-Script"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A RedHat/CentOS compatible init-script is provided for use with this module\nwhich can be found in the plugins directory called haraka.init."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt should be copied to /etc/init.d/haraka and registered with\n'chkconfig --add haraka' to activate haraka at system boot."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The init-script presumes that Haraka is installed as /usr/local/bin/haraka\nand main configuration file is /etc/haraka/config/smtp.ini."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf this is not the case on your system, then you should create the file\n/etc/sysconfig/haraka which accepts the following configuration:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exec  (default: exec=/usr/local/bin/haraka)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The path to Haraka script"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"config  (default: config=/etc/haraka/config/smtp.ini)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The path to the Haraka smtp.ini configuration script"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max_open_files  (default: 65535)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The maximum number of open files allowed per process.  If you are\nrunning Haraka using the 'cluster' module, then this is the per-child\nlimit."}]}]}]},"navigation":{"title":"daemonize"},"_type":"markdown","_id":"content:8.plugins:daemonize.md","_source":"content","_file":"8.plugins/daemonize.md","_extension":"md"}]