[{"_path":"/plugins/redis","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"redis - Redis plugin","description":"Haraka redis plugin - Redis plugin","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"redis-plugin"},"children":[{"type":"text","value":"Redis plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Connects to a local (by default) redis instance and stores a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"redis"}]},{"type":"text","value":"\nconnection handle at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server.notes.redis"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"config"},"children":[{"type":"text","value":"Config"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"redis.ini"}]},{"type":"text","value":" file has the following sections (defaults shown):"}]},{"type":"element","tag":"h3","props":{"id":"server"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"server"}]}]},{"type":"element","tag":"code","props":{"code":"; host=127.0.0.1\n; port=6379\n; db=0\n","language":"ini"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"; host=127.0.0.1\n; port=6379\n; db=0\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"pubsub"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pubsub"}]}]},{"type":"element","tag":"code","props":{"code":"; host=127.0.0.1\n; port=6379\n","language":"ini"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"; host=127.0.0.1\n; port=6379\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Publish & Subscribe are DB agnostic and thus have no db setting. If host and port and not defined, they default to the same as "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" settings."}]},{"type":"element","tag":"h3","props":{"id":"opts"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"opts"}]}]},{"type":"element","tag":"code","props":{"code":"; see https://www.npmjs.com/package/redis#overloading\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"; see https://www.npmjs.com/package/redis#overloading\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use redis in your plugin like so:"}]},{"type":"element","tag":"code","props":{"code":"if (server.notes.redis) {\n    server.notes.redis.hgetall(...);\n        // or any other redis command\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"if (server.notes.redis) {\n    server.notes.redis.hgetall(...);\n        // or any other redis command\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"publishsubscribe-usage"},"children":[{"type":"text","value":"Publish/Subscribe Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In your plugin:"}]},{"type":"element","tag":"code","props":{"code":"exports.results_init = function (next, connection) {\n    var plugin = this;\n    plugin.redis_subscribe(connection, function () {\n        connection.notes.redis.on('pmessage', function (pattern, channel, message) {\n            plugin.do_something_with_message(message, ...);\n        });\n        next();\n    });\n}\n// be nice to redis and disconnect\nexports.hook_disconnect = function (next, connection) {\n    this.redis_unsubscribe(connection);\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"exports.results_init = function (next, connection) {\n    var plugin = this;\n    plugin.redis_subscribe(connection, function () {\n        connection.notes.redis.on('pmessage', function (pattern, channel, message) {\n            plugin.do_something_with_message(message, ...);\n        });\n        next();\n    });\n}\n// be nice to redis and disconnect\nexports.hook_disconnect = function (next, connection) {\n    this.redis_unsubscribe(connection);\n}\n"}]}]}]}]},"navigation":{"title":"redis"},"_type":"markdown","_id":"content:8.plugins:redis.md","_source":"content","_file":"8.plugins/redis.md","_extension":"md"},{"_path":"/plugins/relay_all","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"relay_all - Relay all mail to a specific host","description":"Haraka relay_all plugin - Relay all mail to a specific host","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"relay_all-plugin"},"children":[{"type":"text","value":"relay_all plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin is useful in spamtraps to accept mail to any host, and to allow\nany user from anywhere to send email."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do NOT use this plugin on a real mail server, unless you really know what\nyou are doing. If you use this plugin with anything that relays mail (such\nas forwarding to a real mail server, or the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"deliver"}]},{"type":"text","value":" plugin), your mail\nserver is now an open relay."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is BAD. Hence the big letters. In short: DO NOT USE THIS PLUGIN."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is useful for testing, hence why it is here. Also I work with spamtraps\na lot, so it is useful there."}]}]},"navigation":{"title":"relay_all"},"_type":"markdown","_id":"content:8.plugins:relay_all.md","_source":"content","_file":"8.plugins/relay_all.md","_extension":"md"}]