[{"_path":"/core/Logging_API","_dir":"core","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Logging API","description":"Logging conventions within Haraka","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"logging-api"},"children":[{"type":"text","value":"Logging API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Logging conventions within Haraka"}]},{"type":"element","tag":"h2","props":{"id":"see-also"},"children":[{"type":"text","value":"See also"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":""},"children":[{"type":"text","value":"https://github.com/haraka/Haraka/pull/119"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"logline will always always be in the form:"}]},{"type":"element","tag":"code","props":{"code":"[level] [connection uuid] [origin] message\n","language":"text"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[level] [connection uuid] [origin] message\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"where origin is \"haraka_core\" or the name of the plugin which\ntriggered the message, and \"connection uuid\" is the ID of the\nconnection associated with the message."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"when calling a log method on logger, you should provide the\nplugin object and the connection object anywhere in the arguments\nto the log method."}]},{"type":"element","tag":"code","props":{"code":"logger.logdebug(\"i like turtles\", plugin, connection);\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"logger.logdebug(\"i like turtles\", plugin, connection);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"will yield, for example,"}]},{"type":"element","tag":"code","props":{"code":"[DEBUG] [7F1C820F-DC79-4192-9AA6-5307354B20A6] [dnsbl] i like turtles\n","language":"text"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[DEBUG] [7F1C820F-DC79-4192-9AA6-5307354B20A6] [dnsbl] i like turtles\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"if you call the log method on the connection object, you can\nforego the connection as argument:"}]},{"type":"element","tag":"code","props":{"code":"connection.logdebug(\"turtles all the way down\", plugin);\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"connection.logdebug(\"turtles all the way down\", plugin);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"and similarly for the log methods on the plugin object:"}]},{"type":"element","tag":"code","props":{"code":"plugin.logdebug(\"he just really likes turtles\", connection);\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"plugin.logdebug(\"he just really likes turtles\", connection);\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"failing to provide a connection and/or plugin object will leave\nthe default values in the log (currently \"core\" and\n\"no_connection\")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"this is implemented by testing for argument type in\nthe logger.js log* method. objects-as-arguments are then sniffed\nto try to determine if they're a connection or plugin instance."}]}]},"_type":"markdown","_id":"content:6.core:8.Logging_API.md","_source":"content","_file":"6.core/8.Logging_API.md","_extension":"md"},{"_path":"/core/Net_Utils","_dir":"core","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Net_Utils","description":"This module provides network utility functions.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"net_utils"},"children":[{"type":"text","value":"Net_Utils"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This module provides network utility functions."}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"code","props":{"code":"var net_utils = require('./net_utils');\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"var net_utils = require('./net_utils');\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"ip_to_long"},"children":[{"type":"text","value":"ip_to_long"}]},{"type":"element","tag":"code","props":{"code":"// Convert IPv4 to long\nvar long = net_utils.ip_to_long('11.22.33.44');  // 185999660\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Convert IPv4 to long\nvar long = net_utils.ip_to_long('11.22.33.44');  // 185999660\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"long_to_ip"},"children":[{"type":"text","value":"long_to_ip"}]},{"type":"element","tag":"code","props":{"code":"// Convert long to IPv4\nvar ip = net_utils.long_to_ip(185999660);  // 11.22.33.44\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Convert long to IPv4\nvar ip = net_utils.long_to_ip(185999660);  // 11.22.33.44\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"dec_to_hex"},"children":[{"type":"text","value":"dec_to_hex"}]},{"type":"element","tag":"code","props":{"code":"// Convert decimal to hex\nvar hex = net_utils.dec_to_hex(20111104);  // 132df00\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Convert decimal to hex\nvar hex = net_utils.dec_to_hex(20111104);  // 132df00\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"hex_to_dec"},"children":[{"type":"text","value":"hex_to_dec"}]},{"type":"element","tag":"code","props":{"code":"// Convert hex to decimal\nvar dec = net_utils.hex_to_dec('132df00');  // 20111104\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Convert hex to decimal\nvar dec = net_utils.hex_to_dec('132df00');  // 20111104\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"is_local_ipv4"},"children":[{"type":"text","value":"is_local_ipv4"}]},{"type":"element","tag":"code","props":{"code":"// Is IPv4 address on a local network?\nnet_utils.is_local_ipv4('127.0.0.200');   // true (localhost)\nnet_utils.is_local_ipv4('169.254.0.0');   // true (link local)\nnet_utils.is_local_ipv4('226.0.0.1');     // false\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Is IPv4 address on a local network?\nnet_utils.is_local_ipv4('127.0.0.200');   // true (localhost)\nnet_utils.is_local_ipv4('169.254.0.0');   // true (link local)\nnet_utils.is_local_ipv4('226.0.0.1');     // false\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"is_private_ipv4"},"children":[{"type":"text","value":"is_private_ipv4"}]},{"type":"element","tag":"code","props":{"code":"// Is IPv4 address in RFC 1918 reserved private address space?\nnet_utils.is_private_ipv4('10.0.0.0');       // true\nnet_utils.is_private_ipv4('192.168.0.0');    // true\nnet_utils.is_private_ipv4('172.16.0.0');     // true\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Is IPv4 address in RFC 1918 reserved private address space?\nnet_utils.is_private_ipv4('10.0.0.0');       // true\nnet_utils.is_private_ipv4('192.168.0.0');    // true\nnet_utils.is_private_ipv4('172.16.0.0');     // true\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"is_local_ipv6"},"children":[{"type":"text","value":"is_local_ipv6"}]},{"type":"element","tag":"code","props":{"code":"// Is IPv6 addr on local network?\nnet_utils.is_local_ipv6('::1');           // true (localhost)\nnet_utils.is_local_ipv6('fe80::')         // true (link local)\nnet_utils.is_local_ipv6('fc00::')         // true (unique local)\nnet_utils.is_local_ipv6('fd00::')         // true (unique local)\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// Is IPv6 addr on local network?\nnet_utils.is_local_ipv6('::1');           // true (localhost)\nnet_utils.is_local_ipv6('fe80::')         // true (link local)\nnet_utils.is_local_ipv6('fc00::')         // true (unique local)\nnet_utils.is_local_ipv6('fd00::')         // true (unique local)\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"is_private_ip"},"children":[{"type":"text","value":"is_private_ip"}]},{"type":"element","tag":"code","props":{"code":"// determines if an IPv4 or IPv6 address is on a \"private\" network\n// For IPv4, returns true if is_private_ipv4 or is_local_ipv4 are true\n// For IPv6, returns true if is_local_ipv6 is true\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// determines if an IPv4 or IPv6 address is on a \"private\" network\n// For IPv4, returns true if is_private_ipv4 or is_local_ipv4 are true\n// For IPv6, returns true if is_local_ipv6 is true\n"}]}]}]}]},"_type":"markdown","_id":"content:6.core:10.Net_Utils.md","_source":"content","_file":"6.core/10.Net_Utils.md","_extension":"md"}]