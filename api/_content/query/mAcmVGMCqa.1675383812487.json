{"_path":"/plugins/queue/discard","_dir":"queue","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"discard - Discard mail","description":"Haraka discard plugin - Discard mail","navigation":{"title":"discard"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"discard-plugin"},"children":[{"type":"text","value":"discard plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin will discard a message by pretending that the message was queued."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is designed to be used by other plugins which request the message be\ndiscard by setting a connection or transaction note that this plugin\nchecks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It uses the 'queue' hook, so it runs after all the plugins that hook on "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data_post"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you use the 'quarantine' plug-in then this plugin should run "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"USE THIS PLUGIN WITH CARE!"}]},{"type":"element","tag":"h1","props":{"id":"enable"},"children":[{"type":"text","value":"Enable"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enable by adding a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"queue/discard"}]},{"type":"text","value":" entry in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/plugins"}]},{"type":"text","value":" "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"before"}]},{"type":"text","value":" your\nother queue plugins that perform actual deliveries."}]},{"type":"element","tag":"h1","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"code","props":{"code":"connection.notes.discard = [ 1 | true ];\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":"connection.notes.discard "}]},{"type":"element","tag":"span","props":{"class":"ct-5e898a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"class":"ct-d52200"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5e898a"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d52200"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" ];"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"code","props":{"code":"connection.transaction.notes.discard = [ 1 | true ];\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":"connection.transaction.notes.discard "}]},{"type":"element","tag":"span","props":{"class":"ct-5e898a"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"class":"ct-d52200"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5e898a"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d52200"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-f7794f"},"children":[{"type":"text","value":" ];"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-d52200{color:#0550AE}\n.ct-5e898a{color:#CF222E}\n.ct-f7794f{color:#24292F}\n.dark .ct-f7794f{color:#C9D1D9}\n.dark .ct-5e898a{color:#FF7B72}\n.dark .ct-d52200{color:#79C0FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:8.plugins:queue:discard.md","_source":"content","_file":"8.plugins/queue/discard.md","_extension":"md"}