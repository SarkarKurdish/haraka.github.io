[{"_path":"/plugins/auth/auth_bridge","_dir":"auth","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"auth/auth_bridge - Authenticate users against an external service","description":"Haraka auth/auth_bridge plugin - Authenticate users against an external service","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"authauth_bridge-plugin"},"children":[{"type":"text","value":"auth/auth_bridge plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin allows you to authenticate users to remote SMTP servers\nbridging the original user and password to the remote server,\nand proxy the result back to authenticate the client."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin is meant to be used with the plugin "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"queue/smtp_bridge"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is different than "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth/auth_proxy"}]},{"type":"text","value":" because it doesn't require\nthe AUTH user in "},{"type":"element","tag":"a","props":{"href":"mailto:user@domain.com"},"children":[{"type":"text","value":"user@domain.com"}]},{"type":"text","value":" format, and it doesn't check that\nthe domain is the configuration file. This plugins simply takes\nthe original user and password and tries to authenticate it in the\nremote SMTP server."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuration is stored in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/smtp_bridge.ini"}]},{"type":"text","value":" and uses the INI\nstyle formatting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration of this plugin is simple:"}]},{"type":"element","tag":"code","props":{"code":"host=localhost\n#port=\n#auth_type=\n#priority=10\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"host=localhost\n#port=\n#auth_type=\n#priority=10\n"}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host: the host where you will be authenticating and posting,\nfor example "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"smtp.host.tld"}]},{"type":"text","value":". This is the only setting required."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If needed you can also set"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"port: default to empty and Haraka will use 25."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The options "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth_type"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"priority"}]},{"type":"text","value":" will be used by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"queue/smtp_bridge"}]}]}]},"navigation":{"title":"auth/auth_bridge"},"_type":"markdown","_id":"content:8.plugins:auth:auth_bridge.md","_source":"content","_file":"8.plugins/auth/auth_bridge.md","_extension":"md"},{"_path":"/plugins/auth/auth_proxy","_dir":"auth","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"auth/auth_proxy - Authenticate users against an external service","description":"Haraka auth/auth_proxy plugin - Authenticate users against an external service","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"authauth_proxy-plugin"},"children":[{"type":"text","value":"auth/auth_proxy plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin allows you to authenticate users by domain to remote SMTP servers\nand proxy the result back to authenticate the client."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this to work - the AUTH username "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"must"}]},{"type":"text","value":" be in "},{"type":"element","tag":"a","props":{"href":"mailto:user@domain.com"},"children":[{"type":"text","value":"user@domain.com"}]},{"type":"text","value":" format\nregardless as to whether the remote SMTP server requires it in this format.\nThe domain part of the username is used to look-up which SMTP servers should\nbe used to authenticate users for that domain.\nWhen sending the AUTH credentials to the remote server, this plugin will try\nand send the full username e.g. "},{"type":"element","tag":"a","props":{"href":"mailto:user@domain.com"},"children":[{"type":"text","value":"user@domain.com"}]},{"type":"text","value":" first and if this fails it\nwill then strip the @domain.com part and just send the unqualified username."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Due to the way this plugin works - it can only support PLAIN and LOGIN\nauthentication methods and for this reason it requires that STARTTLS be\nused via the tls plugin before it will advertise AUTH capabilities by the\nEHLO command.  When connecting to the remote SMTP systems it will always\nattempt STARTTLS if it is offered, but it does "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"not"}]},{"type":"text","value":" require it, so caution\nshould be exercised."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuration is stored in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/auth_proxy.ini"}]},{"type":"text","value":" and uses the INI\nstyle formatting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration of this plugin is simple:"}]},{"type":"element","tag":"code","props":{"code":"[domains]\ndomain.com = server1.domain.com:587 server2.domain.com\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[domains]\ndomain.com = server1.domain.com:587 server2.domain.com\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where domain.com is the domain-part of the username equals a list of hosts\nthat should be consulted in host:port format.  The "},{"type":"element","tag":"port","props":{},"children":[]},{"type":"text","value":" is optional and will\ndefault to 25.  The list of hosts can be space, semi-colon or comma separated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If more than host is specified, then subsequent hosts will only be tested if\nthere is some sort of error e.g. timeout, connection or protocol error."}]}]},"navigation":{"title":"auth/auth_proxy"},"_type":"markdown","_id":"content:8.plugins:auth:auth_proxy.md","_source":"content","_file":"8.plugins/auth/auth_proxy.md","_extension":"md"}]