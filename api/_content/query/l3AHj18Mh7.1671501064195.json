[{"_path":"/plugins/auth/auth_proxy","_dir":"auth","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"auth/auth_proxy - Authenticate users against an external service","description":"Haraka auth/auth_proxy plugin - Authenticate users against an external service","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"authauth_proxy-plugin"},"children":[{"type":"text","value":"auth/auth_proxy plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin allows you to authenticate users by domain to remote SMTP servers\nand proxy the result back to authenticate the client."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this to work - the AUTH username "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"must"}]},{"type":"text","value":" be in "},{"type":"element","tag":"a","props":{"href":"mailto:user@domain.com"},"children":[{"type":"text","value":"user@domain.com"}]},{"type":"text","value":" format\nregardless as to whether the remote SMTP server requires it in this format.\nThe domain part of the username is used to look-up which SMTP servers should\nbe used to authenticate users for that domain.\nWhen sending the AUTH credentials to the remote server, this plugin will try\nand send the full username e.g. "},{"type":"element","tag":"a","props":{"href":"mailto:user@domain.com"},"children":[{"type":"text","value":"user@domain.com"}]},{"type":"text","value":" first and if this fails it\nwill then strip the @domain.com part and just send the unqualified username."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Due to the way this plugin works - it can only support PLAIN and LOGIN\nauthentication methods and for this reason it requires that STARTTLS be\nused via the tls plugin before it will advertise AUTH capabilities by the\nEHLO command.  When connecting to the remote SMTP systems it will always\nattempt STARTTLS if it is offered, but it does "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"not"}]},{"type":"text","value":" require it, so caution\nshould be exercised."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuration is stored in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/auth_proxy.ini"}]},{"type":"text","value":" and uses the INI\nstyle formatting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The configuration of this plugin is simple:"}]},{"type":"element","tag":"code","props":{"code":"[domains]\ndomain.com = server1.domain.com:587 server2.domain.com\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[domains]\ndomain.com = server1.domain.com:587 server2.domain.com\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Where domain.com is the domain-part of the username equals a list of hosts\nthat should be consulted in host:port format.  The "},{"type":"element","tag":"port","props":{},"children":[]},{"type":"text","value":" is optional and will\ndefault to 25.  The list of hosts can be space, semi-colon or comma separated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If more than host is specified, then subsequent hosts will only be tested if\nthere is some sort of error e.g. timeout, connection or protocol error."}]}]},"navigation":{"title":"auth/auth_proxy"},"_type":"markdown","_id":"content:8.plugins:auth:auth_proxy.md","_source":"content","_file":"8.plugins/auth/auth_proxy.md","_extension":"md"},{"_path":"/plugins/auth/flat_file","_dir":"auth","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"auth/flat_file - Authenticate users against a flat file","description":"Haraka auth/flat_file plugin - Authenticate users against a flat file","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"authflat_file-plugin"},"children":[{"type":"text","value":"auth/flat_file plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth/flat_file"}]},{"type":"text","value":" plugin allows you to create a file containing username\nand password combinations, and have relaying users authenticate from that\nfile."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that passwords are stored in clear-text, so this may not be a great idea\nfor large scale systems. However the plugin would be a good start for someone\nlooking to implement authentication using some other form of auth."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Security"}]},{"type":"text","value":" - it is recommended to switch to "},{"type":"element","tag":"a","props":{"href":"https://github.com/AuspeXeu/haraka-plugin-auth-enc-file","rel":["nofollow"]},"children":[{"type":"text","value":"auth-encfile"}]},{"type":"text","value":"\nto protect your user credentials."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"IMPORANT NOTE"}]},{"type":"text","value":" - this plugin requires that STARTTLS be used via the tls plugin\nbefore it will advertise AUTH capabilities by the EHLO command.  This is to\nimprove security out-of-the-box.   Localhost and any IP in RFC1918 ranges\nare automatically exempt from this rule."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuration is stored in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/auth_flat_file.ini"}]},{"type":"text","value":" and uses the INI\nstyle formatting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Authentication methods are listed in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[core]"}]},{"type":"text","value":" section under "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"methods"}]},{"type":"text","value":"\nparameter. Lists of authentification methods are comma separated. Currently\nsupported methods are: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"CRAM-MD5"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PLAIN"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LOGIN"}]},{"type":"text","value":". The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PLAIN"}]},{"type":"text","value":"\nand "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LOGIN"}]},{"type":"text","value":" methods are not secure. That is why TLS is required before AUTH is\noffered."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"element","tag":"code","props":{"code":"[core]\nmethods=PLAIN,LOGIN,CRAM-MD5\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[core]\nmethods=PLAIN,LOGIN,CRAM-MD5\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Users are stored in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[users]"}]},{"type":"text","value":" section."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"element","tag":"code","props":{"code":"[users]\nuser1=password1\nuser@domain.com=password2\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[users]\nuser1=password1\nuser@domain.com=password2\n"}]}]}]}]},"navigation":{"title":"auth/flat_file"},"_type":"markdown","_id":"content:8.plugins:auth:flat_file.md","_source":"content","_file":"8.plugins/auth/flat_file.md","_extension":"md"}]