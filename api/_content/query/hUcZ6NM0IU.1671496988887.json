[{"_path":"/plugins/attachment","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"attachment - Attachment plugin for Haraka","description":"Haraka attachment plugin - attachment handling for Haraka","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"attachment-plugin"},"children":[{"type":"text","value":"Attachment plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin allows you to reject messages based on Content-Type within\nthe message or any MIME parts or on the filename of any attachments."}]},{"type":"element","tag":"h2","props":{"id":"limitations"},"children":[{"type":"text","value":"Limitations"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin cannot detect forged MIME types where the sender is lying\nabout the type.  The type is not confirmed in any way currently."}]},{"type":"element","tag":"h2","props":{"id":"requirements"},"children":[{"type":"text","value":"Requirements"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To be able to check filenames inside archive files the npm module\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tmp"}]},{"type":"text","value":" is required and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bsdtar"}]},{"type":"text","value":" binary must be available (in\n/bin /usr/bin or /usr/local/bin)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If either "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tmp"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"bsdtar"}]},{"type":"text","value":" are unavailable then the plugin will\nautomatically disable expansion of archive files."}]},{"type":"element","tag":"h2","props":{"id":"logging"},"children":[{"type":"text","value":"Logging"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At INFO level logging this plugin will output the filename and type\nof each attached file along with an MD5 checksum of the contents.\nThe MD5 checksum is useful to check against "},{"type":"element","tag":"a","props":{"href":"http://www.virustotal.com","rel":["nofollow"]},"children":[{"type":"text","value":"www.virustotal.com"}]}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachment.ini"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"archive_max_depth\n(default: 5)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The maximum level of nested archives that will be unpacked.\nIf this is exceeded the message will be rejected."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"archive_extns\n(default: .zip,.tar,.tgz,.taz,.z,.gz,.rar,.7z)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"File extensions that should be treated as archives.\nThis can be any file type supported by bsdtar."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"allow_encrypted_archives\n(default: false)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Allow archives that cannot be read by bsdtar because\nthey are encrypted."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"timeout\n(default: 30)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Timeout in seconds before the plugin will abort."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachment.filename.regex"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"This file contains a list of regular expressions, one per line that\nwill be tested against each filename found within a message.\nThe first regexp to match will cause the message to be rejected."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAny invalid regexps will be detected, reported and skipped."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachment.filename.wc"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"As above, except this expects wildcards instead of regular expressions."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachment.archive.filename.regex"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"This file contains a list of regular expressions, one per line that\nwill be tested against each filename found within an archive file.\nThe first regexp to match will cause the message to be rejected.\nAny invalid regexps will be detected, reported and skipped."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachment.archive.filename.wc"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"As above, except this expects wildcards instead of regular expressions."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachment.ctype.regex"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"This file contains a list of regular expressions, one per line that\nwill be tested against each MIME Content-Type header in the message.\nThe first regexp to match will cause the message to be rejected.\nAny invalid regexps will be detected, reported and skipped."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"attachiment.ctype.wc"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"As above, except this expects wildcards instead of regular expressions."}]}]}]},"navigation":{"title":"attachment"},"_type":"markdown","_id":"content:8.plugins:attachment.md","_source":"content","_file":"8.plugins/attachment.md","_extension":"md"},{"_path":"/plugins/auth/auth_ldap","_dir":"auth","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"auth/auth_ldap - Authenticate users against an LDAP server","description":"Haraka auth/auth_ldap plugin - Authenticate users against an LDAP server","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"authauth_ldap-plugin"},"children":[{"type":"text","value":"auth/auth_ldap plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth/auth_ldap"}]},{"type":"text","value":" plugin uses an LDAP bind to authenticate a user. Currently\nonly one server and multiple DNs can be configured. If any of the DN binds succeed,\nthe user is authenticated."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Configuration is stored in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/auth_ldap.ini"}]},{"type":"text","value":" and uses the INI\nstyle formatting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Only the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"LOGIN"}]},{"type":"text","value":" authentication method is supported assuming that passwords in the\nLDAP database are not stored in cleartext (which would allow for CRAM-MD5). Note\nthat this means passwords will be sent in the clear to the LDAP server unless\nan "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ldaps://"}]},{"type":"text","value":" conection is used."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Current configuration options in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[core]"}]},{"type":"text","value":" are:"}]},{"type":"element","tag":"code","props":{"code":"server - the url of the LDAP server (ldap:// or ldaps://)\ntimeout - time in miliseconds to wait for the server resonse before giving up\nrejectUnauthorized - boolean (true or false) as to whether to reject connections\n    not verified against a CA. Meaning, a \"false\" allows non-verified.  \n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"server - the url of the LDAP server (ldap:// or ldaps://)\ntimeout - time in miliseconds to wait for the server resonse before giving up\nrejectUnauthorized - boolean (true or false) as to whether to reject connections\n    not verified against a CA. Meaning, a \"false\" allows non-verified.  \n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"element","tag":"code","props":{"code":"[core]\nserver=ldaps://ldap.opoet.com\ntimeout=5000\nrejectUnauthorized=false  \n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[core]\nserver=ldaps://ldap.opoet.com\ntimeout=5000\nrejectUnauthorized=false  \n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"[dns]"}]},{"type":"text","value":" section (that is plural DN and not domain name system), is a list of DNs to use\nto bind. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"%u"}]},{"type":"text","value":" in the strings is substituted with the user name used in the SMTP\nauthentication. Note that the keys have no meaning and the DNs are tried in series until\nthe first successful bind. The LDAP RFC does not allow for parallel binds on a connection,\nso it is suggested that the most commonly used DN be placed earlier in the list."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example:"}]},{"type":"element","tag":"code","props":{"code":"[dns]\ndn1=uid=%u,ou=Users,dc=opoet,dc=com\ndn2=uid=%u,ou=people,dc=opoet,dc=com \n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[dns]\ndn1=uid=%u,ou=Users,dc=opoet,dc=com\ndn2=uid=%u,ou=people,dc=opoet,dc=com \n"}]}]}]}]},"navigation":{"title":"auth/auth_ldap"},"_type":"markdown","_id":"content:8.plugins:auth:auth_ldap.md","_source":"content","_file":"8.plugins/auth/auth_ldap.md","_extension":"md"}]