[{"_path":"/plugins/rcpt_to.routes","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"rcpt_to.routes - Route mail to different hosts based on recipient","description":"Haraka rcpt_to.routes plugin - Route mail to different hosts based on recipient","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rcpt_toroutes-plugin"},"children":[{"type":"text","value":"rcpt_to.routes plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Moved to "},{"type":"element","tag":"a","props":{"href":"https://github.com/haraka/haraka-plugin-recipient-routes","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/haraka/haraka-plugin-recipient-routes"}]}]}]},"navigation":{"title":"rcpt_to.routes"},"_type":"markdown","_id":"content:8.plugins:rcpt_to.routes.md","_source":"content","_file":"8.plugins/rcpt_to.routes.md","_extension":"md"},{"_path":"/plugins/redis","_dir":"plugins","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"redis - Redis plugin","description":"Haraka redis plugin - Redis plugin","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"redis-plugin"},"children":[{"type":"text","value":"Redis plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Connects to a local (by default) redis instance and stores a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"redis"}]},{"type":"text","value":"\nconnection handle at "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server.notes.redis"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"config"},"children":[{"type":"text","value":"Config"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"redis.ini"}]},{"type":"text","value":" file has the following sections (defaults shown):"}]},{"type":"element","tag":"h3","props":{"id":"server"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"server"}]}]},{"type":"element","tag":"code","props":{"code":"; host=127.0.0.1\n; port=6379\n; db=0\n","language":"ini"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"; host=127.0.0.1\n; port=6379\n; db=0\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"pubsub"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"pubsub"}]}]},{"type":"element","tag":"code","props":{"code":"; host=127.0.0.1\n; port=6379\n","language":"ini"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"; host=127.0.0.1\n; port=6379\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Publish & Subscribe are DB agnostic and thus have no db setting. If host and port and not defined, they default to the same as "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" settings."}]},{"type":"element","tag":"h3","props":{"id":"opts"},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"opts"}]}]},{"type":"element","tag":"code","props":{"code":"; see https://www.npmjs.com/package/redis#overloading\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"; see https://www.npmjs.com/package/redis#overloading\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use redis in your plugin like so:"}]},{"type":"element","tag":"code","props":{"code":"if (server.notes.redis) {\n    server.notes.redis.hgetall(...);\n        // or any other redis command\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"if (server.notes.redis) {\n    server.notes.redis.hgetall(...);\n        // or any other redis command\n}\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"publishsubscribe-usage"},"children":[{"type":"text","value":"Publish/Subscribe Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In your plugin:"}]},{"type":"element","tag":"code","props":{"code":"exports.results_init = function (next, connection) {\n    var plugin = this;\n    plugin.redis_subscribe(connection, function () {\n        connection.notes.redis.on('pmessage', function (pattern, channel, message) {\n            plugin.do_something_with_message(message, ...);\n        });\n        next();\n    });\n}\n// be nice to redis and disconnect\nexports.hook_disconnect = function (next, connection) {\n    this.redis_unsubscribe(connection);\n}\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"exports.results_init = function (next, connection) {\n    var plugin = this;\n    plugin.redis_subscribe(connection, function () {\n        connection.notes.redis.on('pmessage', function (pattern, channel, message) {\n            plugin.do_something_with_message(message, ...);\n        });\n        next();\n    });\n}\n// be nice to redis and disconnect\nexports.hook_disconnect = function (next, connection) {\n    this.redis_unsubscribe(connection);\n}\n"}]}]}]}]},"navigation":{"title":"redis"},"_type":"markdown","_id":"content:8.plugins:redis.md","_source":"content","_file":"8.plugins/redis.md","_extension":"md"}]